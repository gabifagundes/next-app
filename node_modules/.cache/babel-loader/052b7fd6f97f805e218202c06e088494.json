{"ast":null,"code":"import _classCallCheck from \"/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/src/modules/FavoriteButton/index.js\";\nimport React, { Component } from 'react';\nimport HeartLight from \"../../assets/Icons/icon-heart-white.svg\";\nimport HeartFull from \"../../assets/Icons/icon-heart-full.svg\";\nimport IconButton from '@material-ui/core/IconButton';\nimport styles from './FavoriteButton.module.css';\nimport _ from 'lodash';\n\nvar FavoriteButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FavoriteButton, _Component);\n\n  function FavoriteButton() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FavoriteButton);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FavoriteButton)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      liked: false\n    };\n\n    _this.addFavorite = function () {\n      var liked = _this.state.liked;\n      var data = _this.props.data;\n\n      _this.setState({\n        liked: !liked\n      });\n\n      var old = JSON.parse(localStorage.getItem(\"favorites\")) || [];\n      var newFavorite = data;\n\n      var hasFavorited = _.findIndex(old, newFavorite);\n\n      if (liked) {\n        _.remove(old, newFavorite);\n\n        localStorage.setItem(\"favorites\", JSON.stringify(old));\n        return;\n      }\n\n      if (hasFavorited < 0) {\n        old.push(newFavorite);\n        localStorage.setItem(\"favorites\", JSON.stringify(old));\n        return;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(FavoriteButton, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data = this.props.data;\n      var favoritedItens = JSON.parse(localStorage.getItem(\"favorites\")) || [];\n\n      var hasFavorited = _.findIndex(favoritedItens, data);\n\n      hasFavorited >= 0 ? this.setState({\n        liked: true\n      }) : this.setState({\n        liked: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var type = this.props.type;\n      var liked = this.state.liked;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, type === \"Icon\" ? React.createElement(IconButton, {\n        \"aria-label\": \"Delete\",\n        className: styles.icon,\n        onClick: this.addFavorite,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: liked ? HeartFull : HeartLight,\n        className: \"Heart\",\n        alt: \"Heart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      })) : React.createElement(\"button\", {\n        className: styles.button,\n        onClick: this.addFavorite,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: liked ? HeartFull : HeartLight,\n        className: \"Heart\",\n        alt: \"Heart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"ml4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Add to Favorites\")));\n    }\n  }]);\n\n  return FavoriteButton;\n}(Component);\n\nexport default FavoriteButton;","map":{"version":3,"sources":["/Users/apple/Desktop/Projetos/Challenge/frontend-challenge/yourcode/src/modules/FavoriteButton/index.js"],"names":["React","Component","IconButton","styles","_","FavoriteButton","state","liked","addFavorite","data","props","setState","old","JSON","parse","localStorage","getItem","newFavorite","hasFavorited","findIndex","remove","setItem","stringify","push","favoritedItens","type","icon","HeartFull","HeartLight","button"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport HeartLight from '../../assets/Icons/icon-heart-white.svg';\nimport HeartFull from \"../../assets/Icons/icon-heart-full.svg\";\nimport IconButton from '@material-ui/core/IconButton';\nimport styles from './FavoriteButton.module.css';\nimport _ from 'lodash';\n\n\nclass FavoriteButton extends Component {\n  state={\n    liked:false,\n  }\n\n  componentDidMount(){\n    const {data} = this.props;\n    const favoritedItens = JSON.parse(localStorage.getItem(\"favorites\")) || [];\n    const hasFavorited = _.findIndex(favoritedItens, data);\n    hasFavorited >= 0 ? this.setState({ liked: true }) : this.setState({ liked: false }) ;\n  }\n\n  addFavorite=()=>{\n    const { liked }=this.state;\n    const { data }= this.props;\n    this.setState({ liked: !liked });\n    const old = JSON.parse(localStorage.getItem(\"favorites\")) || [];\n    var newFavorite = data;\n    const hasFavorited = _.findIndex(old, newFavorite);\n    if (liked) {\n      _.remove(old, newFavorite);\n      localStorage.setItem(\"favorites\", JSON.stringify(old));\n      return;\n    }\n    if (hasFavorited<0){\n      old.push(newFavorite);\n      localStorage.setItem(\"favorites\", JSON.stringify(old));\n      return;\n    }\n  };\n\n  render() {\n    const { type  } = this.props;\n    const { liked } = this.state;\n    return (\n      <React.Fragment>\n        {type === \"Icon\" ? (\n          <IconButton\n            aria-label=\"Delete\"\n            className={styles.icon}\n            onClick={this.addFavorite}\n          >\n            <img\n              src={liked ? HeartFull : HeartLight}\n              className=\"Heart\"\n              alt=\"Heart\"\n            />\n          </IconButton>\n        ) : (\n          <button className={styles.button} onClick={this.addFavorite}>\n            <img\n              src={liked ? HeartFull : HeartLight}\n              className=\"Heart\"\n              alt=\"Heart\"\n            />\n            <span className=\"ml4\">Add to Favorites</span>\n          </button>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default FavoriteButton;"]},"metadata":{},"sourceType":"module"}